<?xml version="1.0" encoding="UTF-8"?>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container">
  
  
  
  
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="resources/bootstrap.min.css"/>
    <link rel="stylesheet" href="resources/xtpxlib-moduledoc.css"/>
    <link rel="shortcut icon" href="resources/favicon.ico"/>
    <title>2 XSLT Modules</title>
  </head>
  <body style="padding-top: 65px;"><nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark"><a class="navbar-brand" href="index.html" title="home">xtpxlib-common</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"/></button><div id="navbarSupportedContent" class="collapse navbar-collapse"><ul class="navbar-nav mr-auto"><li class="nav-item dropdown"><a href="1_Description.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Description <span class="caret"/></a><div class="dropdown-menu"><a href="1_Description.html" class="dropdown-item">Description</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="1_Description.html#d9366e200">Contents</a><a class="dropdown-item" href="1_Description.html#parameters-explanation">Parameter handling in xtpxlib-common</a></div></li><li class="nav-item dropdown"><a href="2_XSLT_Modules.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XSLT Modules <span class="caret"/></a><div class="dropdown-menu"><a href="2_XSLT_Modules.html" class="dropdown-item">XSLT Modules</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="2_XSLT_Modules.html#compare.mod.xsl">XSLT (2.0): compare.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#date-time.mod.xsl">XSLT (2.0): date-time.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#format-output.mod.xsl">XSLT (2.0): format-output.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#general.mod.xsl">XSLT (2.0): general.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#href.mod.xsl">XSLT (2.0): href.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#macrodefs.mod.xsl">XSLT (3.0): macrodefs.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#message.mod.xsl">XSLT (2.0): message.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#mimetypes.mod.xsl">XSLT (2.0): mimetypes.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#parameters.mod.xsl">XSLT (3.0): parameters.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#simple-macros.mod.xsl">XSLT (3.0): simple-macros.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#uuid.mod.xsl">XSLT (2.0): uuid.mod.xsl</a></div></li><li class="nav-item dropdown"><a href="3_XProc_1.0_Libraries.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XProc 1.0 Libraries <span class="caret"/></a><div class="dropdown-menu"><a href="3_XProc_1.0_Libraries.html" class="dropdown-item">XProc 1.0 Libraries</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="3_XProc_1.0_Libraries.html#common.mod.xpl">XProc (1.0) library: common.mod.xpl</a></div></li><li class="nav-item dropdown"><a href="4_XProc_3.0_Support.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XProc 3.0 Support <span class="caret"/></a><div class="dropdown-menu"><a href="4_XProc_3.0_Support.html" class="dropdown-item">XProc 3.0 Support</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="4_XProc_3.0_Support.html#d9366e7386">oXygen XProc 3.0 support</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#copy-dir.xpl">XProc (3.0) pipeline: copy-dir.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#create-clear-directory.xpl">XProc (3.0) pipeline: create-clear-directory.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#expand-macro-definitions.xpl">XProc (3.0) pipeline: expand-macro-definitions.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#recursive-directory-list.xpl">XProc (3.0) pipeline: recursive-directory-list.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#subdir-list.xpl">XProc (3.0) pipeline: subdir-list.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#validate.xpl">XProc (3.0) pipeline: validate.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#write-log.xpl">XProc (3.0) pipeline: write-log.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#zip-directory.xpl">XProc (3.0) pipeline: zip-directory.xpl</a></div></li><li class="nav-item dropdown"><a href="5_XSLT_Stylesheets.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XSLT Stylesheets <span class="caret"/></a><div class="dropdown-menu"><a href="5_XSLT_Stylesheets.html" class="dropdown-item">XSLT Stylesheets</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="5_XSLT_Stylesheets.html#expand-macro-definitions.xsl">XSLT (3.0): expand-macro-definitions.xsl</a><a class="dropdown-item" href="5_XSLT_Stylesheets.html#get-system-properties.xsl">XSLT (2.0): get-system-properties.xsl</a><a class="dropdown-item" href="5_XSLT_Stylesheets.html#xslmod2xqmod-stub.xsl">XSLT (2.0): xslmod2xqmod-stub.xsl</a></div></li><li class="nav-item dropdown"><a href="6_XML_Data_Files.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XML Data Files <span class="caret"/></a><div class="dropdown-menu"><a href="6_XML_Data_Files.html" class="dropdown-item">XML Data Files</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="6_XML_Data_Files.html#dummy.xml">XML document: dummy.xml</a><a class="dropdown-item" href="6_XML_Data_Files.html#fop-default-config.xml">XML document: fop-default-config.xml</a><a class="dropdown-item" href="6_XML_Data_Files.html#mimetypes-table.xml">XML document: mimetypes-table.xml</a></div></li><li class="nav-item dropdown"><a href="7_XML_Schemas.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XML Schemas <span class="caret"/></a><div class="dropdown-menu"><a href="7_XML_Schemas.html" class="dropdown-item">XML Schemas</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="7_XML_Schemas.html#message.xsd">XML Schema: message.xsd</a><a class="dropdown-item" href="7_XML_Schemas.html#mimetypes.xsd">XML Schema: mimetypes.xsd</a><a class="dropdown-item" href="7_XML_Schemas.html#parameters.xsd">XML Schema: parameters.xsd</a></div></li><li class="nav-item"><a class="nav-link" href="resources/xtpxlib-common-documentation.pdf" title="PDF version of this documentation site">PDF</a></li></ul></div></nav><div class="container"><a name="chapter-xslt-modules"><!----></a><div class="page-header" style="padding-top: 65px; margin-top: -65px;"><h1 class="chapter"><span class="chapter-number">2 </span>XSLT Modules</h1></div><p class="para">The xtpxlib-common component contains the following XSLT modules. The ones used most frequently are <code class="code"><a href="#general.mod.xsl"><span class="link">general.mod.xsl</span></a></code> and <code class="code"><a href="#href.mod.xsl"><span class="link">href.mod.xsl</span></a></code>.</p><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Module/Pipeline</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#compare.mod.xsl"><span class="link">compare.mod.xsl</span></a></code></td><td>XSL library module with support for comparing XML documents/elements:</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl"><span class="link">date-time.mod.xsl</span></a></code></td><td>XSLT library module containing functions for working with dates and times.</td></tr><tr><td><code class="code code-width-limited"><a href="#format-output.mod.xsl"><span class="link">format-output.mod.xsl</span></a></code></td><td>XSLT library with functions for formatting output/strings.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl"><span class="link">general.mod.xsl</span></a></code></td><td>XSLT library module with general constants and code.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl"><span class="link">href.mod.xsl</span></a></code></td><td>XSLT library module with functions for the generic handling of href-s (filenames/paths).</td></tr><tr><td><code class="code code-width-limited"><a href="#macrodefs.mod.xsl"><span class="link">macrodefs.mod.xsl</span></a></code></td><td>Module for handling macro definitions.</td></tr><tr><td><code class="code code-width-limited"><a href="#message.mod.xsl"><span class="link">message.mod.xsl</span></a></code></td><td>Message related templates.</td></tr><tr><td><code class="code code-width-limited"><a href="#mimetypes.mod.xsl"><span class="link">mimetypes.mod.xsl</span></a></code></td><td>MIME type conversion related functions.</td></tr><tr><td><code class="code code-width-limited"><a href="#parameters.mod.xsl"><span class="link">parameters.mod.xsl</span></a></code></td><td>Takes an XML document with parameters and turns this into a parameter map.</td></tr><tr><td><code class="code code-width-limited"><a href="#simple-macros.mod.xsl"><span class="link">simple-macros.mod.xsl</span></a></code></td><td/></tr><tr><td><code class="code code-width-limited"><a href="#uuid.mod.xsl"><span class="link">uuid.mod.xsl</span></a></code></td><td>UUID related functions.</td></tr></tbody></table></div><div class="sect1" id="compare.mod.xsl"><a name="compare.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.1</span> XSLT (2.0): <code class="code">compare.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/compare.mod.xsl</code></p><p class="para">XSL library module with support for comparing XML documents/elements:</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Named template</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#compare.mod.xsl-xtlc_compare-documents-2"><span class="link">xtlc:compare-documents</span></a></code></td><td>Compares two XML documents with each other:</td></tr></tbody></table></div><div class="sect2" id="compare.mod.xsl-xtlc_compare-documents-2"><a name="compare.mod.xsl-xtlc_compare-documents-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.1.1</span> Named template: <code class="code">xtlc:compare-documents as element(xtlc:message)*</code></h3><p class="para">Compares two XML documents with each other:</p><ul class="itemizedlist"><li><p class="para">Comments and processing instructions are ignored</p></li><li><p class="para">Text nodes are normalized before comparison</p></li><li><p class="para">Empty text nodes (after normalization) are ignored</p></li><li><p class="para">The comparison stops after the first difference is encountered.</p></li><li><p class="para">The result is either:</p><ul class="itemizedlist"><li><p class="para">An empty set, when no differences found</p></li><li><p class="para">One or more <code class="code">xtlc:message</code> elements, <code class="code">status="error"</code> when differences were found (you can only get more than one message on attribute differences)</p></li></ul></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">doc1</code></td><td><code class="code code-width-limited">document-node()</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>First document to compare.</td></tr><tr><td><code class="code code-width-limited">doc2</code></td><td><code class="code code-width-limited">document-node()</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>Second document to compare.</td></tr></tbody></table></div></div></div><div class="sect1" id="date-time.mod.xsl"><a name="date-time.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.2</span> XSLT (2.0): <code class="code">date-time.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/date-time.mod.xsl</code></p><p class="para">XSLT library module containing functions for working with dates and times.</p><p class="para">When language based, it only distinguishes between Dutch and non-Dutch (which now means: English).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Variable</th><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc:day-names-en</code></td><td><code class="code code-width-limited">xs:string+</code></td><td><code class="code code-width-limited">('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saterday', 'Sunday')</code></td><td>Sequence with the names of the days in English</td></tr><tr><td><code class="code code-width-limited">xtlc:day-names-nl</code></td><td><code class="code code-width-limited">xs:string+</code></td><td><code class="code code-width-limited">('maandag', 'dinsdag', 'woensdag', 'donderdag', 'vrijdag', 'zaterdag', 'zondag')</code></td><td>Sequence with the names of the days in Dutch</td></tr><tr><td><code class="code code-width-limited">xtlc:month-names-en</code></td><td><code class="code code-width-limited">xs:string+</code></td><td><code class="code code-width-limited">('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December')</code></td><td>Sequence with the names of the months in English</td></tr><tr><td><code class="code code-width-limited">xtlc:month-names-nl</code></td><td><code class="code code-width-limited">xs:string+</code></td><td><code class="code code-width-limited">('januari', 'februari', 'maart', 'april', 'mei', 'juni', 'juli', 'augustus', 'september', 'oktober', 'november', 'december')</code></td><td>Sequence with the names of the months in Dutch</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_day-in-year-number-1"><span class="link">xtlc:day-in-year-number()</span></a></code></td><td>Computes the day number in the year: January 1 is 1, December 31 is 365 (or 366 in leap years).</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_days-in-month-2"><span class="link">xtlc:days-in-month()</span></a></code></td><td>Computes the number of days in a particular month. If values are out of range it returns 0.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_format-date-as-text-2"><span class="link">xtlc:format-date-as-text()</span></a></code></td><td>Formats a date as a string with the month name in full.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_format-date-as-text-short-2"><span class="link">xtlc:format-date-as-text-short()</span></a></code></td><td>Formats a date as a string with the month name in short.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_is-leap-year-1"><span class="link">xtlc:is-leap-year()</span></a></code></td><td>Returns true when a given year is a leap year</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_month-name-2"><span class="link">xtlc:month-name()</span></a></code></td><td>Returns the name of a month.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_month-name-short-2"><span class="link">xtlc:month-name-short()</span></a></code></td><td>Returns the name of a month in short (abbreviated to 3 characters).</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_to-date-3"><span class="link">xtlc:to-date()</span></a></code></td><td>Creates a date from its components.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_unix-epoch-1"><span class="link">xtlc:unix-epoch()</span></a></code></td><td>Computes the UNIX "epoch" code (number of seconds since 1-1-1970) for a given date/time.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_week-number-1"><span class="link">xtlc:week-number()</span></a></code></td><td>Computes the ISO week number for a given date.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_weekday-name-2"><span class="link">xtlc:weekday-name()</span></a></code></td><td>Returns the name of a month.</td></tr><tr><td><code class="code code-width-limited"><a href="#date-time.mod.xsl-xtlc_weekday-number-1"><span class="link">xtlc:weekday-number()</span></a></code></td><td>The number of the weekday (1=Monday, 7=Sunday).</td></tr></tbody></table></div><div class="sect2" id="date-time.mod.xsl-xtlc_day-in-year-number-1"><a name="date-time.mod.xsl-xtlc_day-in-year-number-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.1</span> Function: <code class="code">xtlc:day-in-year-number() as xs:integer</code></h3><p class="para">Computes the day number in the year: January 1 is 1, December 31 is 365 (or 366 in leap years).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">date</code></td><td><code class="code code-width-limited">xs:date</code></td><td>Date to use.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_days-in-month-2"><a name="date-time.mod.xsl-xtlc_days-in-month-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.2</span> Function: <code class="code">xtlc:days-in-month() as xs:integer</code></h3><p class="para">Computes the number of days in a particular month. If values are out of range it returns 0.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">month-number</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The month to calculate the number of days for.</td></tr><tr><td><code class="code code-width-limited">year</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The year this month is in (important because of leap years).</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_format-date-as-text-2"><a name="date-time.mod.xsl-xtlc_format-date-as-text-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.3</span> Function: <code class="code">xtlc:format-date-as-text() as xs:string</code></h3><p class="para">Formats a date as a string with the month name in full.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">date</code></td><td><code class="code code-width-limited">xs:date</code></td><td>The date to format.</td></tr><tr><td><code class="code code-width-limited">lang</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The language for the conversion.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_format-date-as-text-short-2"><a name="date-time.mod.xsl-xtlc_format-date-as-text-short-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.4</span> Function: <code class="code">xtlc:format-date-as-text-short() as xs:string</code></h3><p class="para">Formats a date as a string with the month name in short.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">date</code></td><td><code class="code code-width-limited">xs:date</code></td><td>The date to format.</td></tr><tr><td><code class="code code-width-limited">lang</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The language for the conversion.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_is-leap-year-1"><a name="date-time.mod.xsl-xtlc_is-leap-year-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.5</span> Function: <code class="code">xtlc:is-leap-year() as xs:boolean</code></h3><p class="para">Returns true when a given year is a leap year</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">year</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The year to check.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_month-name-2"><a name="date-time.mod.xsl-xtlc_month-name-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.6</span> Function: <code class="code">xtlc:month-name() as xs:string</code></h3><p class="para">Returns the name of a month.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">month-number</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The month number (1-12).</td></tr><tr><td><code class="code code-width-limited">lang</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The language you want the month name in.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_month-name-short-2"><a name="date-time.mod.xsl-xtlc_month-name-short-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.7</span> Function: <code class="code">xtlc:month-name-short() as xs:string</code></h3><p class="para">Returns the name of a month in short (abbreviated to 3 characters).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">month-number</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The month number (1-12).</td></tr><tr><td><code class="code code-width-limited">lang</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The language you want the month name in.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_to-date-3"><a name="date-time.mod.xsl-xtlc_to-date-3"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.8</span> Function: <code class="code">xtlc:to-date() as xs:date</code></h3><p class="para">Creates a date from its components.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">day</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>Day number to use.</td></tr><tr><td><code class="code code-width-limited">month</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>Month number to use.</td></tr><tr><td><code class="code code-width-limited">year</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>Year to use.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_unix-epoch-1"><a name="date-time.mod.xsl-xtlc_unix-epoch-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.9</span> Function: <code class="code">xtlc:unix-epoch() as xs:decimal</code></h3><p class="para">Computes the UNIX "epoch" code (number of seconds since 1-1-1970) for a given date/time.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">datetime</code></td><td><code class="code code-width-limited">xs:dateTime</code></td><td>The date/time to compute the epoch code for.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_week-number-1"><a name="date-time.mod.xsl-xtlc_week-number-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.10</span> Function: <code class="code">xtlc:week-number() as xs:integer</code></h3><p class="para">Computes the ISO week number for a given date.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">date</code></td><td><code class="code code-width-limited">xs:date</code></td><td>Date to use.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_weekday-name-2"><a name="date-time.mod.xsl-xtlc_weekday-name-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.11</span> Function: <code class="code">xtlc:weekday-name() as xs:string</code></h3><p class="para">Returns the name of a month.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">day-number</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The day number (1-7).</td></tr><tr><td><code class="code code-width-limited">lang</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The language you want the month name in.</td></tr></tbody></table></div></div><div class="sect2" id="date-time.mod.xsl-xtlc_weekday-number-1"><a name="date-time.mod.xsl-xtlc_weekday-number-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.2.12</span> Function: <code class="code">xtlc:weekday-number() as xs:integer</code></h3><p class="para">The number of the weekday (1=Monday, 7=Sunday).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">date</code></td><td><code class="code code-width-limited">xs:date</code></td><td>Date to use.</td></tr></tbody></table></div></div></div><div class="sect1" id="format-output.mod.xsl"><a name="format-output.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.3</span> XSLT (2.0): <code class="code">format-output.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/format-output.mod.xsl</code></p><p class="para">XSLT library with functions for formatting output/strings.</p><p class="para">When language based, we only distinguish between Dutch and non-Dutch (usually English).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#format-output.mod.xsl-xtlc_duration2str-2"><span class="link">xtlc:duration2str()</span></a></code></td><td>Turns a day/time duration into a more readable string, e.g. <code class="code">1d3h40m12s</code></td></tr><tr><td><code class="code code-width-limited"><a href="#format-output.mod.xsl-xtlc_format-amount-2"><span class="link">xtlc:format-amount()</span></a></code></td><td>Formats an amount by adding a € sign and always use double digits.</td></tr><tr><td><code class="code code-width-limited"><a href="#format-output.mod.xsl-xtlc_format-double-3"><span class="link">xtlc:format-double()</span></a></code></td><td>Formats a double as a string with a given amount of digits.</td></tr><tr><td><code class="code code-width-limited"><a href="#format-output.mod.xsl-xtlc_size2str-1"><span class="link">xtlc:size2str()</span></a></code></td><td>Turns an integer (e.g. a file size) into a (rounded) number using a <code class="code">Kb</code>/<code class="code">Mb</code>/<code class="code">Gb</code> suffix.</td></tr></tbody></table></div><div class="sect2" id="format-output.mod.xsl-xtlc_duration2str-2"><a name="format-output.mod.xsl-xtlc_duration2str-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.3.1</span> Function: <code class="code">xtlc:duration2str() as xs:string</code></h3><p class="para">Turns a day/time duration into a more readable string, e.g. <code class="code">1d3h40m12s</code></p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">duration</code></td><td><code class="code code-width-limited">xs:dayTimeDuration</code></td><td>The duration to convert.</td></tr><tr><td><code class="code code-width-limited">round-seconds</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>Whether the seconds part must be rounded.</td></tr></tbody></table></div></div><div class="sect2" id="format-output.mod.xsl-xtlc_format-amount-2"><a name="format-output.mod.xsl-xtlc_format-amount-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.3.2</span> Function: <code class="code">xtlc:format-amount() as xs:string</code></h3><p class="para">Formats an amount by adding a € sign and always use double digits.</p><p class="para">For the Dutch language, <code class="code">.</code> and <code class="code">,</code> are swapped.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">amount</code></td><td><code class="code code-width-limited">xs:double</code></td><td>The amount to format.</td></tr><tr><td><code class="code code-width-limited">lang</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The language for the conversion.</td></tr></tbody></table></div></div><div class="sect2" id="format-output.mod.xsl-xtlc_format-double-3"><a name="format-output.mod.xsl-xtlc_format-double-3"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.3.3</span> Function: <code class="code">xtlc:format-double() as xs:string</code></h3><p class="para">Formats a double as a string with a given amount of digits.</p><p class="para">For the Dutch language, <code class="code">.</code> and <code class="code">,</code> are swapped.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">dbl</code></td><td><code class="code code-width-limited">xs:double</code></td><td>Number to convert</td></tr><tr><td><code class="code code-width-limited">digits</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The number of digits to use. When &lt; 0 this is left open.</td></tr><tr><td><code class="code code-width-limited">lang</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The language for the conversion.</td></tr></tbody></table></div></div><div class="sect2" id="format-output.mod.xsl-xtlc_size2str-1"><a name="format-output.mod.xsl-xtlc_size2str-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.3.4</span> Function: <code class="code">xtlc:size2str() as xs:string</code></h3><p class="para">Turns an integer (e.g. a file size) into a (rounded) number using a <code class="code">Kb</code>/<code class="code">Mb</code>/<code class="code">Gb</code> suffix.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">size</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The size to convert.</td></tr></tbody></table></div></div></div><div class="sect1" id="general.mod.xsl"><a name="general.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.4</span> XSLT (2.0): <code class="code">general.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/general.mod.xsl</code></p><p class="para">XSLT library module with general constants and code.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Variable</th><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc:default-dt-format</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'[Y]-[M01]-[D01] [H01]:[m01]:[s01]'</code></td><td>Default date/time format string (<code class="code">yyyy-mm-dd …</code>).</td></tr><tr><td><code class="code code-width-limited">xtlc:default-dt-format-en</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'[M01]-[D01]-[Y] [H01]:[m01]:[s01]'</code></td><td>Date/time format string (English: <code class="code">mm-dd-yyyy …</code>).</td></tr><tr><td><code class="code code-width-limited">xtlc:default-dt-format-nl</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'[D01]-[M01]-[Y] [H01]:[m01]:[s01]'</code></td><td>Date/time format string (Dutch: <code class="code">dd-mm-yyyy …</code>).</td></tr><tr><td><code class="code code-width-limited">xtlc:internal-error-prompt</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'Internal error: '</code></td><td>Add this in front of any internal error raised.</td></tr><tr><td><code class="code code-width-limited">xtlc:language-en</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'en'</code></td><td>Language code for English</td></tr><tr><td><code class="code code-width-limited">xtlc:language-nl</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'nl'</code></td><td>Language code for Dutch</td></tr><tr><td><code class="code code-width-limited">xtlc:namespace-xtlc-common</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">namespace-uri-for-prefix('xtlc', doc('')/*)</code></td><td>Namespace used for <code class="code">xtpxlib-common</code>.</td></tr><tr><td><code class="code code-width-limited">xtlc:status-codes</code></td><td><code class="code code-width-limited">xs:string+</code></td><td><code class="code code-width-limited">($xtlc:status-info, $xtlc:status-warning, $xtlc:status-error, $xtlc:status-debug)</code></td><td>Sequence with all valid status codes.</td></tr><tr><td><code class="code code-width-limited">xtlc:status-debug</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'debug'</code></td><td>Generic debug status/severity code.</td></tr><tr><td><code class="code code-width-limited">xtlc:status-error</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'error'</code></td><td>Generic error status/severity code.</td></tr><tr><td><code class="code code-width-limited">xtlc:status-info</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'info'</code></td><td>Generic info (a.k.a. OK) status/severity code.</td></tr><tr><td><code class="code code-width-limited">xtlc:status-warning</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'warning'</code></td><td>Generic warning status/severity code.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Named template</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_raise-error-2"><span class="link">xtlc:raise-error</span></a></code></td><td>Stops any processing by raising an error.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_att2str-1"><span class="link">xtlc:att2str()</span></a></code></td><td>Turns an attribute into a string representation, suitable for display (e.g. <code class="code">name="value"</code>).</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_capitalize-1"><span class="link">xtlc:capitalize()</span></a></code></td><td>Capitalizes a string (makes the first character uppercase).</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_char-repeat-2"><span class="link">xtlc:char-repeat()</span></a></code></td><td>Returns a string with a single character repeated a given number of times.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_count-leading-whitespace-1"><span class="link">xtlc:count-leading-whitespace()</span></a></code></td><td>Counts the number of whitespace characters at the beginning of a string</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_elm2str-1"><span class="link">xtlc:elm2str()</span></a></code></td><td>Turns an element into a descriptive string (the element with all its attributes, excluding schema references).</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_item2element-2"><span class="link">xtlc:item2element()</span></a></code></td><td>Tries to find the element belonging to a given item.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_items2str-1"><span class="link">xtlc:items2str()</span></a></code></td><td>Creates a string from a sequence of items.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_prefix-to-length-3"><span class="link">xtlc:prefix-to-length()</span></a></code></td><td>Prefixes a string with a given character so it will get at least a given length.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_q-1"><span class="link">xtlc:q()</span></a></code></td><td>Returns the input string quoted (<code class="code">"$in"</code>)</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2bln-2"><span class="link">xtlc:str2bln()</span></a></code></td><td>Safe conversion of a string into a boolean.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2filename-safe-2"><span class="link">xtlc:str2filename-safe()</span></a></code></td><td>Replaces all characters in a string that are not allowed in filenames with another character.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2filename-safe-1"><span class="link">xtlc:str2filename-safe()</span></a></code></td><td>Replaces all characters in a string that are not allowed in filenames with an underscore.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2id-2"><span class="link">xtlc:str2id()</span></a></code></td><td>Turns a string into a valid identifier, adding a prefix.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2id-1"><span class="link">xtlc:str2id()</span></a></code></td><td>Turns a string into a valid identifier.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2int-2"><span class="link">xtlc:str2int()</span></a></code></td><td>Safe conversion of a string to an integer.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2regexp-2"><span class="link">xtlc:str2regexp()</span></a></code></td><td>Turns a string into a regular expression that matches the input exactly. Optionally anchors the regular expression so the match will be on this string <span class="emphasis italic">only</span> (result starts with <code class="code">^</code> and ends with <code class="code">$</code>).</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2regexp-1"><span class="link">xtlc:str2regexp()</span></a></code></td><td>Turns a string into a regular expression that matches the input exactly.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_str2seq-1"><span class="link">xtlc:str2seq()</span></a></code></td><td>Converts a string with a list of words into a sequence of words.</td></tr><tr><td><code class="code code-width-limited"><a href="#general.mod.xsl-xtlc_text2lines-3"><span class="link">xtlc:text2lines()</span></a></code></td><td>Converts text into separate lines.</td></tr></tbody></table></div><div class="sect2" id="general.mod.xsl-xtlc_raise-error-2"><a name="general.mod.xsl-xtlc_raise-error-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.1</span> Named template: <code class="code">xtlc:raise-error</code></h3><p class="para">Stops any processing by raising an error.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">error-name</code></td><td><code class="code code-width-limited">xs:string</code></td><td> </td><td><code class="code code-width-limited">$xtlc:status-error</code></td><td>The (optional) name of the error. Must be an NCName.</td></tr><tr><td><code class="code code-width-limited">msg-parts</code></td><td><code class="code code-width-limited">item()+</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>Error message to show (in parts, all parts will be concatenated by <code class="code">xtlc:items2str()</code>).</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_att2str-1"><a name="general.mod.xsl-xtlc_att2str-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.2</span> Function: <code class="code">xtlc:att2str() as xs:string</code></h3><p class="para">Turns an attribute into a string representation, suitable for display (e.g. <code class="code">name="value"</code>).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">att</code></td><td><code class="code code-width-limited">attribute()?</code></td><td>Attribute to convert.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_capitalize-1"><a name="general.mod.xsl-xtlc_capitalize-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.3</span> Function: <code class="code">xtlc:capitalize() as xs:string</code></h3><p class="para">Capitalizes a string (makes the first character uppercase).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The string to work on.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_char-repeat-2"><a name="general.mod.xsl-xtlc_char-repeat-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.4</span> Function: <code class="code">xtlc:char-repeat() as xs:string</code></h3><p class="para">Returns a string with a single character repeated a given number of times.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">char</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The first character of this string is the character to repeat. If empty, an empty string is returned.</td></tr><tr><td><code class="code code-width-limited">repeat</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The number of repeats. If &lt;= <code class="code">0</code>, an empty string is returned.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_count-leading-whitespace-1"><a name="general.mod.xsl-xtlc_count-leading-whitespace-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.5</span> Function: <code class="code">xtlc:count-leading-whitespace() as xs:integer</code></h3><p class="para">Counts the number of whitespace characters at the beginning of a string</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">text</code></td><td><code class="code code-width-limited">xs:string</code></td><td>Text to work on.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_elm2str-1"><a name="general.mod.xsl-xtlc_elm2str-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.6</span> Function: <code class="code">xtlc:elm2str() as xs:string</code></h3><p class="para">Turns an element into a descriptive string (the element with all its attributes, excluding schema references).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">elm</code></td><td><code class="code code-width-limited">element()?</code></td><td>Element to convert</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_item2element-2"><a name="general.mod.xsl-xtlc_item2element-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.7</span> Function: <code class="code">xtlc:item2element() as element()?</code></h3><p class="para">Tries to find the element belonging to a given item.</p><ul class="itemizedlist"><li><p class="para">When the item is of type <code class="code">xs:string</code> or <code class="code">xs:anyURI</code>, it is assumed to be a document reference. The root element of this is returned.</p></li><li><p class="para">When the item is of type <code class="code">document-node()</code>, the root element of this document is returned</p></li><li><p class="para">When the item is of type <code class="code">element()</code>, this is returned</p></li></ul><p class="para">You can choose whether to produce an error message or <code class="code">()</code> when the item cannot be resolved.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">item</code></td><td><code class="code code-width-limited">item()</code></td><td>The item to work on</td></tr><tr><td><code class="code code-width-limited">error-on-non-resolve</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>Whether to generate an error when <code class="code">$item</code> could not be resolved. Otherwise, the function will return <code class="code">()</code>.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_items2str-1"><a name="general.mod.xsl-xtlc_items2str-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.8</span> Function: <code class="code">xtlc:items2str() as xs:string</code></h3><p class="para">Creates a string from a sequence of items.</p><p class="para">Useful for easy creation of messages consisting of multiple parts and pieces.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">items</code></td><td><code class="code code-width-limited">item()*</code></td><td>The message parts to combine</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_prefix-to-length-3"><a name="general.mod.xsl-xtlc_prefix-to-length-3"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.9</span> Function: <code class="code">xtlc:prefix-to-length() as xs:string</code></h3><p class="para">Prefixes a string with a given character so it will get at least a given length.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string</code></td><td>String to prefix</td></tr><tr><td><code class="code code-width-limited">prefix-char</code></td><td><code class="code code-width-limited">xs:string</code></td><td>String to prefix with. Only first character is used. If empty, <code class="code">*</code> is used.</td></tr><tr><td><code class="code code-width-limited">length</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>The length to reach.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_q-1"><a name="general.mod.xsl-xtlc_q-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.10</span> Function: <code class="code">xtlc:q() as xs:string</code></h3><p class="para">Returns the input string quoted (<code class="code">"$in"</code>)</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2bln-2"><a name="general.mod.xsl-xtlc_str2bln-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.11</span> Function: <code class="code">xtlc:str2bln() as xs:boolean</code></h3><p class="para">Safe conversion of a string into a boolean.</p><p class="para">When <code class="code">$in</code> is empty or not convertible into a boolean, <code class="code">$default</code> is returned.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert.</td></tr><tr><td><code class="code code-width-limited">default</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>Default value to return when $in is empty or cannot be converted.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2filename-safe-2"><a name="general.mod.xsl-xtlc_str2filename-safe-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.12</span> Function: <code class="code">xtlc:str2filename-safe() as xs:string</code></h3><p class="para">Replaces all characters in a string that are not allowed in filenames with another character.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert</td></tr><tr><td><code class="code code-width-limited">replace-char</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to replace invalid characters with. Only first character is used. If empty, <code class="code">_</code> is used.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2filename-safe-1"><a name="general.mod.xsl-xtlc_str2filename-safe-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.13</span> Function: <code class="code">xtlc:str2filename-safe() as xs:string</code></h3><p class="para">Replaces all characters in a string that are not allowed in filenames with an underscore.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2id-2"><a name="general.mod.xsl-xtlc_str2id-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.14</span> Function: <code class="code">xtlc:str2id() as xs:string</code></h3><p class="para">Turns a string into a valid identifier, adding a prefix.</p><p class="para">All characters that are not allowed in an identifier are converted into underscores.</p><p class="para">When the result does not start with a letter or underscore, the prefix <code class="code">id-</code> is added.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string</code></td><td>String to convert.</td></tr><tr><td><code class="code code-width-limited">prefix</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>Prefix to apply.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2id-1"><a name="general.mod.xsl-xtlc_str2id-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.15</span> Function: <code class="code">xtlc:str2id() as xs:string</code></h3><p class="para">Turns a string into a valid identifier.</p><p class="para">All characters that are not allowed in an identifier are converted into underscores.</p><p class="para">When the result does not start with a letter or underscore, the prefix <code class="code">id-</code> is added.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string</code></td><td>String to convert.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2int-2"><a name="general.mod.xsl-xtlc_str2int-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.16</span> Function: <code class="code">xtlc:str2int() as xs:integer</code></h3><p class="para">Safe conversion of a string to an integer.</p><p class="para">When <code class="code">$in</code> is empty or not convertible to an integer, <code class="code">$default</code> is returned.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert.</td></tr><tr><td><code class="code code-width-limited">default</code></td><td><code class="code code-width-limited">xs:integer</code></td><td>Default value to return when $in is empty or cannot be converted.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2regexp-2"><a name="general.mod.xsl-xtlc_str2regexp-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.17</span> Function: <code class="code">xtlc:str2regexp() as xs:string</code></h3><p class="para">Turns a string into a regular expression that matches the input exactly. Optionally anchors the regular expression so the match will be on this string <span class="emphasis italic">only</span> (result starts with <code class="code">^</code> and ends with <code class="code">$</code>).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert</td></tr><tr><td><code class="code code-width-limited">anchor</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>If true, the resulting string will be anchored (start with <code class="code">^</code> and ends with <code class="code">$</code>)</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2regexp-1"><a name="general.mod.xsl-xtlc_str2regexp-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.18</span> Function: <code class="code">xtlc:str2regexp() as xs:string</code></h3><p class="para">Turns a string into a regular expression that matches the input exactly.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_str2seq-1"><a name="general.mod.xsl-xtlc_str2seq-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.19</span> Function: <code class="code">xtlc:str2seq() as xs:string*</code></h3><p class="para">Converts a string with a list of words into a sequence of words.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>String to convert.</td></tr></tbody></table></div></div><div class="sect2" id="general.mod.xsl-xtlc_text2lines-3"><a name="general.mod.xsl-xtlc_text2lines-3"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.4.20</span> Function: <code class="code">xtlc:text2lines() as xs:string*</code></h3><p class="para">Converts text into separate lines.</p><p class="para">Uses the LF as separator; CRs are removed.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">text</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>The text to convert.</td></tr><tr><td><code class="code code-width-limited">remove-empty-start-end-lines</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>When <code class="code">true</code> any empty (containing whitespace only) lines at the beginning and end are removed.</td></tr><tr><td><code class="code code-width-limited">normalize-indents</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>When <code class="code">true</code> the indents of the lines are normalized: the indent of the non-whitespace line with the minimum leading whitespace is removed from all other lines. Lines that contain only whitespace will become zero length.</td></tr></tbody></table></div></div></div><div class="sect1" id="href.mod.xsl"><a name="href.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.5</span> XSLT (2.0): <code class="code">href.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/href.mod.xsl</code></p><p class="para">XSLT library module with functions for the generic handling of href-s (filenames/paths).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Variable</th><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc:protocol-file</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'file'</code></td><td>File protocol specifier.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-add-encoding-1"><span class="link">xtlc:href-add-encoding()</span></a></code></td><td>Percent encodes all "strange" characters (<code class="code">%xx</code>). Any existing percentage encodings will be kept as is.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-canonical-1"><span class="link">xtlc:href-canonical()</span></a></code></td><td>Makes an href canonical (remove any .. and . directory specifiers).</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-concat-1"><span class="link">xtlc:href-concat()</span></a></code></td><td>Performs a safe concatenation of href components:</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-decode-uri-1"><span class="link">xtlc:href-decode-uri()</span></a></code></td><td>Reverse function of encode-fo-uri(). Translates percent encodings (<code class="code">%xx</code>) into their actual characters.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-ext-1"><span class="link">xtlc:href-ext()</span></a></code></td><td>Returns the extension part of an href.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-is-absolute-1"><span class="link">xtlc:href-is-absolute()</span></a></code></td><td>Returns <code class="code">true</code> if the href is considered absolute.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-name-1"><span class="link">xtlc:href-name()</span></a></code></td><td>Returns the (file)name part of an href.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-name-noext-1"><span class="link">xtlc:href-name-noext()</span></a></code></td><td>Returns the (file)name part of an href without its extension.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-noext-1"><span class="link">xtlc:href-noext()</span></a></code></td><td>Returns the complete href path without its extension.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-path-1"><span class="link">xtlc:href-path()</span></a></code></td><td>Returns the path part of an href.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-protocol-1"><span class="link">xtlc:href-protocol()</span></a></code></td><td>Returns the protocol part of an href (without the <code class="code">://</code>).</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-protocol-2"><span class="link">xtlc:href-protocol()</span></a></code></td><td>Returns the protocol part of an href (without the <code class="code">://</code>) or a default value when none present.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-protocol-add-3"><span class="link">xtlc:href-protocol-add()</span></a></code></td><td>Adds a protocol specifier (written without the trailing <code class="code">://</code>, e.g. <code class="code">http</code>) to an href.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-protocol-present-1"><span class="link">xtlc:href-protocol-present()</span></a></code></td><td>Returns true when an href has a protocol specifier (e.g. <code class="code">file://</code> or <code class="code">http://</code>).</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-protocol-remove-1"><span class="link">xtlc:href-protocol-remove()</span></a></code></td><td>Removes the protocol part from an href.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-relative-2"><span class="link">xtlc:href-relative()</span></a></code></td><td>Computes a relative href from one document to another.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-relative-from-path-2"><span class="link">xtlc:href-relative-from-path()</span></a></code></td><td>Computes a relative href from a directory path to a document.</td></tr><tr><td><code class="code code-width-limited"><a href="#href.mod.xsl-xtlc_href-result-doc-1"><span class="link">xtlc:href-result-doc()</span></a></code></td><td>Transforms an href into something <code class="code">xsl:result-document/@href</code> can use.</td></tr></tbody></table></div><div class="sect2" id="href.mod.xsl-xtlc_href-add-encoding-1"><a name="href.mod.xsl-xtlc_href-add-encoding-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.1</span> Function: <code class="code">xtlc:href-add-encoding() as xs:string</code></h3><p class="para">Percent encodes all "strange" characters (<code class="code">%xx</code>). Any existing percentage encodings will be kept as is.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-canonical-1"><a name="href.mod.xsl-xtlc_href-canonical-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.2</span> Function: <code class="code">xtlc:href-canonical() as xs:string</code></h3><p class="para">Makes an href canonical (remove any .. and . directory specifiers).</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">href-canonical('a/b/../c')</code> ==&gt; <code class="code">'a/c'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-concat-1"><a name="href.mod.xsl-xtlc_href-concat-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.3</span> Function: <code class="code">xtlc:href-concat() as xs:string</code></h3><p class="para">Performs a safe concatenation of href components:</p><ul class="itemizedlist"><li><p class="para">Translates all backslashes into slashes</p></li><li><p class="para">Makes sure that all components are separated with a single slash</p></li><li><p class="para">If somewhere in the list is an absolute path, the concatenation stops.</p></li></ul><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-concat(('a', 'b', 'c'))</code> ==&gt; <code class="code">'a/b/c'</code></p></li><li><p class="para"><code class="code">xtlc:href-concat(('a', '/b', 'c'))</code> ==&gt; <code class="code">'/b/c'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href-path-components</code></td><td><code class="code code-width-limited">xs:string*</code></td><td>The path components to concatenate into a full href.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-decode-uri-1"><a name="href.mod.xsl-xtlc_href-decode-uri-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.4</span> Function: <code class="code">xtlc:href-decode-uri() as xs:string</code></h3><p class="para">Reverse function of encode-fo-uri(). Translates percent encodings (<code class="code">%xx</code>) into their actual characters.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-ext-1"><a name="href.mod.xsl-xtlc_href-ext-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.5</span> Function: <code class="code">xtlc:href-ext() as xs:string</code></h3><p class="para">Returns the extension part of an href.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-ext('a/b/c.xml')</code> ==&gt; <code class="code">'xml'</code></p></li><li><p class="para"><code class="code">xtlc:href-ext('a/b/c')</code> ==&gt; <code class="code">''</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-is-absolute-1"><a name="href.mod.xsl-xtlc_href-is-absolute-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.6</span> Function: <code class="code">xtlc:href-is-absolute() as xs:boolean</code></h3><p class="para">Returns <code class="code">true</code> if the href is considered absolute.</p><p class="para">An href is considered absolute when it starts with a <code class="code">/</code> or <code class="code">\</code>, contains a protocol specifier (e.g. <code class="code">file://</code>) or starts with a Windows drive letter (e.g. <code class="code">C:</code>).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-name-1"><a name="href.mod.xsl-xtlc_href-name-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.7</span> Function: <code class="code">xtlc:href-name() as xs:string</code></h3><p class="para">Returns the (file)name part of an href.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-name('a/b/c')</code> ==&gt; <code class="code">'c'</code></p></li><li><p class="para"><code class="code">xtlc:href-name('c')</code> ==&gt; <code class="code">'c'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-name-noext-1"><a name="href.mod.xsl-xtlc_href-name-noext-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.8</span> Function: <code class="code">xtlc:href-name-noext() as xs:string</code></h3><p class="para">Returns the (file)name part of an href without its extension.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-name-noext('a/b/c.xml')</code> ==&gt; <code class="code">'c'</code></p></li><li><p class="para"><code class="code">xtlc:href-name-noext('a/b/c')</code> ==&gt; <code class="code">'c'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-noext-1"><a name="href.mod.xsl-xtlc_href-noext-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.9</span> Function: <code class="code">xtlc:href-noext() as xs:string</code></h3><p class="para">Returns the complete href path without its extension.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-noext('a/b/c.xml')</code> ==&gt; <code class="code">'a/b/c'</code></p></li><li><p class="para"><code class="code">xtlc:href-noext('a/b/c')</code> ==&gt; <code class="code">'a/b/c'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-path-1"><a name="href.mod.xsl-xtlc_href-path-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.10</span> Function: <code class="code">xtlc:href-path() as xs:string</code></h3><p class="para">Returns the path part of an href.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-path('a/b/c')</code> ==&gt; <code class="code">'a/b'</code></p></li><li><p class="para"><code class="code">xtlc:href-path('c')</code> ==&gt; <code class="code">''</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-protocol-1"><a name="href.mod.xsl-xtlc_href-protocol-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.11</span> Function: <code class="code">xtlc:href-protocol() as xs:string</code></h3><p class="para">Returns the protocol part of an href (without the <code class="code">://</code>).</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-protocol('http://…')</code> ==&gt; <code class="code">'http'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-protocol-2"><a name="href.mod.xsl-xtlc_href-protocol-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.12</span> Function: <code class="code">xtlc:href-protocol() as xs:string</code></h3><p class="para">Returns the protocol part of an href (without the <code class="code">://</code>) or a default value when none present.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:href-protocol('http://…', 'file')</code> ==&gt; <code class="code">'http'</code></p></li><li><p class="para"><code class="code">xtlc:href-protocol('/a/b/c', 'file')</code> ==&gt; <code class="code">'file'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr><tr><td><code class="code code-width-limited">default-protocol</code></td><td><code class="code code-width-limited">xs:string</code></td><td>Default protocol to return when $ref contains none.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-protocol-add-3"><a name="href.mod.xsl-xtlc_href-protocol-add-3"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.13</span> Function: <code class="code">xtlc:href-protocol-add() as xs:string</code></h3><p class="para">Adds a protocol specifier (written without the trailing <code class="code">://</code>, e.g. <code class="code">http</code>) to an href.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr><tr><td><code class="code code-width-limited">protocol</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The protocol to add, without a leading <code class="code">://</code> part (e.g. just <code class="code">file</code> or <code class="code">http</code>).</td></tr><tr><td><code class="code code-width-limited">force</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>When <code class="code">true</code> an existing protocol is removed first. When <code class="code">false</code>, a reference with an existing protocol is left unchanged.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-protocol-present-1"><a name="href.mod.xsl-xtlc_href-protocol-present-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.14</span> Function: <code class="code">xtlc:href-protocol-present() as xs:boolean</code></h3><p class="para">Returns true when an href has a protocol specifier (e.g. <code class="code">file://</code> or <code class="code">http://</code>).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-protocol-remove-1"><a name="href.mod.xsl-xtlc_href-protocol-remove-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.15</span> Function: <code class="code">xtlc:href-protocol-remove() as xs:string</code></h3><p class="para">Removes the protocol part from an href.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:protocol-remove('file:///a/b/c')</code> ==&gt; <code class="code">'/a/b/c'</code></p></li></ul><p class="para">Weird exceptions:</p><ul class="itemizedlist"><li><p class="para"><code class="code">xtlc:protocol-remove('file:/a/b/c')</code> ==&gt; <code class="code">'/a/b/c'</code></p></li><li><p class="para"><code class="code">xtlc:protocol-remove('file:/C:/a/b/c')</code> ==&gt; <code class="code">'C:/a/b/c'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-relative-2"><a name="href.mod.xsl-xtlc_href-relative-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.16</span> Function: <code class="code">xtlc:href-relative() as xs:string</code></h3><p class="para">Computes a relative href from one document to another.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">href-relative('a/b/c/from.xml', 'a/b/to.xml')</code> ==&gt; <code class="code">'../to.xml'</code></p></li><li><p class="para"><code class="code">href-relative('a/b/c/from.xml', 'a/b/d/to.xml')</code> ==&gt; <code class="code">'../d/to.xml'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">from-href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href (of a document) of the starting point.</td></tr><tr><td><code class="code code-width-limited">to-href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href (of a document) of the target.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-relative-from-path-2"><a name="href.mod.xsl-xtlc_href-relative-from-path-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.17</span> Function: <code class="code">xtlc:href-relative-from-path() as xs:string</code></h3><p class="para">Computes a relative href from a directory path to a document.</p><p class="para">Examples:</p><ul class="itemizedlist"><li><p class="para"><code class="code">href-relative-from-path('a/b/c', 'a/b/to.xml')</code> ==&gt; <code class="code">'../to.xml'</code></p></li><li><p class="para"><code class="code">href-relative-from-path('a/b/c', 'a/b/d/to.xml')</code> ==&gt; <code class="code">'../d/to.xml'</code></p></li></ul><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">from-href-path</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href (of a directory) of the starting point.</td></tr><tr><td><code class="code code-width-limited">to-href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href (of a document) of the target.</td></tr></tbody></table></div></div><div class="sect2" id="href.mod.xsl-xtlc_href-result-doc-1"><a name="href.mod.xsl-xtlc_href-result-doc-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.5.18</span> Function: <code class="code">xtlc:href-result-doc() as xs:string</code></h3><p class="para">Transforms an href into something <code class="code">xsl:result-document/@href</code> can use.</p><p class="para"><code class="code">xsl:result-document/@href</code> needs a <code class="code">file://</code> in front and has some strict rules about the formatting. The input to this function <span class="emphasis italic">must</span> be an absolute href!</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href</code></td><td><code class="code code-width-limited">xs:string</code></td><td>href to work on. Must be absolute!</td></tr></tbody></table></div></div></div><div class="sect1" id="macrodefs.mod.xsl"><a name="macrodefs.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.6</span> XSLT (3.0): <code class="code">macrodefs.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/macrodefs.mod.xsl</code></p><p class="para">Module for handling macro definitions.</p><p class="para">A macro definition is a simple <code class="code">name=value</code> construct. They are passed around in maps (<code class="code">map(xs:string, xs:string)</code>).</p><p class="para">The <code class="code">xtlc:expand-macrodefs()</code> function expands macro definition references within strings by using <code class="code">${…}</code> or <code class="code">{$…}</code>. To prevent the expansion of these constructions, simply double the opening curly brace. All referenced macro definitions must exist, otherwise an error will be raised.</p><p class="para">Macro definitions can reference other macro definitions.</p><p class="para">Additionally, you can modify the value of a macro definition reference by appending one or more flags. For more information on the available flags, refer to the <code class="code">$macrodef-flag-*</code> global variables.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Variable</th><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc:macrodef-flag-capitalize</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'cap'</code></td><td>Macro definition reference flag: capitalize (upper-case first character)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-flag-compact</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'compact'</code></td><td>Macro definition reference flag: remove all whitespace</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-flag-filename-safe</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'fns'</code></td><td>Macro definition reference flag: make filename safe (replace all characters forbidden in file/directory names with underscores)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-flag-filename-safe-extra</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'fnsx'</code></td><td>Macro definition reference flag: make filename safe, extended (replace all characters forbidden in file/directory names and all whitespace with underscores)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-flag-lower-case</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'lc'</code></td><td>Macro definition reference flag: lower-case</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-flag-normalize</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'normalize'</code></td><td>Macro definition reference flag: normalize space</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-flag-upper-case</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'uc'</code></td><td>Macro definition reference flag: upper-case</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-standard-date</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'DATE'</code></td><td>Standard macro definition: date only (<code class="code">YYYY-MM-DD</code>)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-standard-date-compact</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'DATECOMPACT'</code></td><td>Standard macro definition: date only, compact (<code class="code">YYYYMMDD</code>)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-standard-datetimeiso</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'DATETIMEISO'</code></td><td>Standard macro definition: date/time in ISO format</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-standard-time</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'TIME'</code></td><td>Standard macro definition: time only (<code class="code">hh:mm:ss</code>)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-standard-time-compact</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'TIMECOMPACT'</code></td><td>Standard macro definition: time only, compact (<code class="code">hhmmss</code>)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-standard-time-short</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'TIMESHORT'</code></td><td>Standard macro definition: time only without seconds (<code class="code">hh:mm</code>)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-standard-time-short-compact</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'TIMESHORTCOMPACT'</code></td><td>Standard macro definition: time only without seconds, compact (<code class="code">hhmm</code>)</td></tr><tr><td><code class="code code-width-limited">xtlc:macrodef-start-character</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'$'</code></td><td>Character that starts a macro definition reference.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Named template</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#macrodefs.mod.xsl-xtlc_expand-macro-definitions-7"><span class="link">xtlc:expand-macro-definitions</span></a></code></td><td>Expands macro definitions in text nodes and/or attribute values.</td></tr><tr><td><code class="code code-width-limited"><a href="#macrodefs.mod.xsl-xtlc_macrodefs-as-comment-1"><span class="link">xtlc:macrodefs-as-comment</span></a></code></td><td>Outputs a simple comment showing the contents of <code class="code">$macrodef-map</code>.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#macrodefs.mod.xsl-xtlc_expand-macrodefs-2"><span class="link">xtlc:expand-macrodefs()</span></a></code></td><td>Expands macro definition references in a string against the macro definitions in <code class="code">$macrodef-map</code>. Checks for circular references.</td></tr><tr><td><code class="code code-width-limited"><a href="#macrodefs.mod.xsl-xtlc_get-standard-macrodef-map-0"><span class="link">xtlc:get-standard-macrodef-map()</span></a></code></td><td>Returns a map with standard macro definitions. See the <code class="code">$xtlc:macrodef-standard-*</code> global variable definitions.</td></tr><tr><td><code class="code code-width-limited"><a href="#macrodefs.mod.xsl-xtlc_merge-macrodefs-1"><span class="link">xtlc:merge-macrodefs()</span></a></code></td><td>Merges multiple macro definition maps, taking care that newer definitions override existing ones. Will return an empty map if the input is the empty sequence.</td></tr></tbody></table></div><div class="sect2" id="macrodefs.mod.xsl-xtlc_expand-macro-definitions-7"><a name="macrodefs.mod.xsl-xtlc_expand-macro-definitions-7"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.6.1</span> Named template: <code class="code">xtlc:expand-macro-definitions</code></h3><p class="para">Expands macro definitions in text nodes and/or attribute values.</p><p class="para">The template checks for <code class="code">&lt;:macrodefs&gt;</code> elements that are the first child of any element. If so, any <code class="code">&lt;:macrodef&gt;</code> children are used to define (or override) macro definitions. These elements can be in any namespace.</p><p class="para">See also <code class="code">xsdmod/macrodefs.mod.xsd</code>.</p><p class="para">You can customize its functionality by using the template parameters.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">add-macrodef-comments</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">false()</code></td><td>Whether to add a macro definition comment (summarizing all macro definitions) when a <code class="code">&lt;*:macrodefs&gt;</code> element is processed.</td></tr><tr><td><code class="code code-width-limited">expand-in-attributes</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether to expand the macro definitions in attributes.</td></tr><tr><td><code class="code code-width-limited">expand-in-text</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether to expand the macro definitions in text nodes.</td></tr><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">node()</code></td><td> </td><td><code class="code code-width-limited">.</code></td><td>The node for which to expand the macro definitions. Must be an element or a document node.</td></tr><tr><td><code class="code code-width-limited">macrodefs</code></td><td><code class="code code-width-limited">map(xs:string, xs:string)*</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Any initial macro definitions.</td></tr><tr><td><code class="code code-width-limited">use-local-macrodefs</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Check for <code class="code">&lt;*:macrodefs&gt;</code> element as first child and process accordingly</td></tr><tr><td><code class="code code-width-limited">use-standard-macrodefs</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether to use the standard macro definitions.</td></tr></tbody></table></div></div><div class="sect2" id="macrodefs.mod.xsl-xtlc_macrodefs-as-comment-1"><a name="macrodefs.mod.xsl-xtlc_macrodefs-as-comment-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.6.2</span> Named template: <code class="code">xtlc:macrodefs-as-comment</code></h3><p class="para">Outputs a simple comment showing the contents of <code class="code">$macrodef-map</code>.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">macrodef-map</code></td><td><code class="code code-width-limited">map(xs:string, xs:string)</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The macro definitions to show in the comment.</td></tr></tbody></table></div></div><div class="sect2" id="macrodefs.mod.xsl-xtlc_expand-macrodefs-2"><a name="macrodefs.mod.xsl-xtlc_expand-macrodefs-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.6.3</span> Function: <code class="code">xtlc:expand-macrodefs() as xs:string</code></h3><p class="para">Expands macro definition references in a string against the macro definitions in <code class="code">$macrodef-map</code>. Checks for circular references.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">text</code></td><td><code class="code code-width-limited">xs:string</code></td><td/></tr><tr><td><code class="code code-width-limited">macrodef-map</code></td><td><code class="code code-width-limited">map(xs:string, xs:string)</code></td><td/></tr></tbody></table></div></div><div class="sect2" id="macrodefs.mod.xsl-xtlc_get-standard-macrodef-map-0"><a name="macrodefs.mod.xsl-xtlc_get-standard-macrodef-map-0"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.6.4</span> Function: <code class="code">xtlc:get-standard-macrodef-map() as map(xs:string, xs:string)</code></h3><p class="para">Returns a map with standard macro definitions. See the <code class="code">$xtlc:macrodef-standard-*</code> global variable definitions.</p></div><div class="sect2" id="macrodefs.mod.xsl-xtlc_merge-macrodefs-1"><a name="macrodefs.mod.xsl-xtlc_merge-macrodefs-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.6.5</span> Function: <code class="code">xtlc:merge-macrodefs() as map(xs:string, xs:string)</code></h3><p class="para">Merges multiple macro definition maps, taking care that newer definitions override existing ones. Will return an empty map if the input is the empty sequence.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">macrodefs</code></td><td><code class="code code-width-limited">map(xs:string, xs:string)*</code></td><td>The macro definition maps to merge.</td></tr></tbody></table></div></div></div><div class="sect1" id="message.mod.xsl"><a name="message.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.7</span> XSLT (2.0): <code class="code">message.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/message.mod.xsl</code></p><p class="para">Message related templates.</p><p class="para">A <a href="7_XML_Schemas.html#message.xsd"><span class="link">message</span></a> is a standardized piece of XML used for inserting (error, debug, etc.) messages into XML documents.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Named template</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#message.mod.xsl-xtlc_msg-create-4"><span class="link">xtlc:msg-create</span></a></code></td><td>Generates a standard <code class="code">xtlc:message</code> element.</td></tr></tbody></table></div><div class="sect2" id="message.mod.xsl-xtlc_msg-create-4"><a name="message.mod.xsl-xtlc_msg-create-4"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.7.1</span> Named template: <code class="code">xtlc:msg-create as element(xtlc:message)</code></h3><p class="para">Generates a standard <code class="code">xtlc:message</code> element.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">extra-attributes</code></td><td><code class="code code-width-limited">attribute()*</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Any extra attributes to add to the message.</td></tr><tr><td><code class="code code-width-limited">extra-contents</code></td><td><code class="code code-width-limited">element()*</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Any extra elements to add to the message.</td></tr><tr><td><code class="code code-width-limited">msg-parts</code></td><td><code class="code code-width-limited">item()+</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>Message to show (parts will be concatenated by <code class="code">xtlc:items2str()</code>).</td></tr><tr><td><code class="code code-width-limited">status</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The status of the message. Must be one of the <code class="code">$xtlc:status-*</code> constants as defined in <a href="#general.mod.xsl"><span class="link">general.mod.xsl</span></a>.</td></tr></tbody></table></div></div></div><div class="sect1" id="mimetypes.mod.xsl"><a name="mimetypes.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.8</span> XSLT (2.0): <code class="code">mimetypes.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/mimetypes.mod.xsl</code></p><p class="para">MIME type conversion related functions.</p><p class="para">These conversions work with an <a href="6_XML_Data_Files.html#mimetypes-table.xml"><span class="link">external MIME type/extension table</span></a>.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#mimetypes.mod.xsl-xtlc_ext2mimetype-1"><span class="link">xtlc:ext2mimetype()</span></a></code></td><td>Turns an href extension (e.g. <code class="code">xml')</code> into the correct MIME type (<code class="code">'text/xml'</code>).</td></tr><tr><td><code class="code code-width-limited"><a href="#mimetypes.mod.xsl-xtlc_mimetype2ext-1"><span class="link">xtlc:mimetype2ext()</span></a></code></td><td>Turns a MIME type (e.g. <code class="code">'text/xml'</code>) into a corresponding href extension (<code class="code">'xml'</code>).</td></tr></tbody></table></div><div class="sect2" id="mimetypes.mod.xsl-xtlc_ext2mimetype-1"><a name="mimetypes.mod.xsl-xtlc_ext2mimetype-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.8.1</span> Function: <code class="code">xtlc:ext2mimetype() as xs:string</code></h3><p class="para">Turns an href extension (e.g. <code class="code">xml')</code> into the correct MIME type (<code class="code">'text/xml'</code>).</p><p class="para">When it cannot find an appropriate MIME type it returns the empty string.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">ext</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The extension to convert.</td></tr></tbody></table></div></div><div class="sect2" id="mimetypes.mod.xsl-xtlc_mimetype2ext-1"><a name="mimetypes.mod.xsl-xtlc_mimetype2ext-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.8.2</span> Function: <code class="code">xtlc:mimetype2ext() as xs:string</code></h3><p class="para">Turns a MIME type (e.g. <code class="code">'text/xml'</code>) into a corresponding href extension (<code class="code">'xml'</code>).</p><p class="para">When it doesn't recognize the MIME type it returns the empty string.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">mimetype</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The MIME type to convert.</td></tr></tbody></table></div></div></div><div class="sect1" id="parameters.mod.xsl"><a name="parameters.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.9</span> XSLT (3.0): <code class="code">parameters.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/parameters.mod.xsl</code></p><p class="para">Takes an XML document with parameters and turns this into a parameter map.</p><p class="para">More information <a href="1_Description.html#parameters-explanation"><span class="link">here</span></a>.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Variable</th><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc:parameter-group-separator</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'.'</code></td><td>When a &lt;group&gt; element is encountered, this character is used as a separator after the group's name.</td></tr><tr><td><code class="code code-width-limited">xtlc:parameter-main-trigger-character</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'$'</code></td><td>Use this variable for a quick check on whether something might contain a parameter: <code class="code">contains(..., $xtlc:parameter-main-trigger-character)</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#parameters.mod.xsl-xtlc_expand-text-against-parameters-2"><span class="link">xtlc:expand-text-against-parameters()</span></a></code></td><td>Expands parameter references in <code class="code">$text</code> (either <code class="code">{$...}</code> or <code class="code">${...}</code>) against the parameters in <code class="code">$parameter-map</code>. If a parameter has multiple values, only the first one is used.</td></tr><tr><td><code class="code code-width-limited"><a href="#parameters.mod.xsl-xtlc_parameters-get-2"><span class="link">xtlc:parameters-get()</span></a></code></td><td>Tries to locate a <code class="code">&lt;parameters&gt;</code> element (in any namespace) underneath <code class="code">$root-item</code> and processes the child <code class="code">&lt;parameter&gt;</code> and <code class="code">&lt;group&gt;</code> elements in here into a parameter map.</td></tr></tbody></table></div><div class="sect2" id="parameters.mod.xsl-xtlc_expand-text-against-parameters-2"><a name="parameters.mod.xsl-xtlc_expand-text-against-parameters-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.9.1</span> Function: <code class="code">xtlc:expand-text-against-parameters() as xs:string</code></h3><p class="para">Expands parameter references in <code class="code">$text</code> (either <code class="code">{$...}</code> or <code class="code">${...}</code>) against the parameters in <code class="code">$parameter-map</code>. If a parameter has multiple values, only the first one is used.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">text</code></td><td><code class="code code-width-limited">xs:string</code></td><td>Text to expand.</td></tr><tr><td><code class="code code-width-limited">parameter-map</code></td><td><code class="code code-width-limited">map(xs:string, xs:string*)</code></td><td>Map with parameter values.</td></tr></tbody></table></div></div><div class="sect2" id="parameters.mod.xsl-xtlc_parameters-get-2"><a name="parameters.mod.xsl-xtlc_parameters-get-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.9.2</span> Function: <code class="code">xtlc:parameters-get() as map(xs:string, xs:string*)</code></h3><p class="para">Tries to locate a <code class="code">&lt;parameters&gt;</code> element (in any namespace) underneath <code class="code">$root-item</code> and processes the child <code class="code">&lt;parameter&gt;</code> and <code class="code">&lt;group&gt;</code> elements in here into a parameter map.</p><p class="para">The <code class="code">&lt;value&gt;</code> elements are filtered according to the entries in <code class="code">$filters</code>.</p><p class="para">Parameter references in values (either <code class="code">{$...}</code> or <code class="code">${...}</code>). are expanded. If a parameter has multiple values, only the first one is used.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">root-item</code></td><td><code class="code code-width-limited">item()</code></td><td>Root item under which the first <code class="code">&lt;parameters&gt;</code> element is processed. Can be an href, a document node or an element. See <code class="code">xtlc:item2element()</code> on how this is processed.</td></tr><tr><td><code class="code code-width-limited">filters</code></td><td><code class="code code-width-limited">map(xs:string, xs:string*)?</code></td><td>Any filters for the parameter's <code class="code">&lt;value&gt;</code> elements.</td></tr></tbody></table></div></div></div><div class="sect1" id="simple-macros.mod.xsl"><a name="simple-macros.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.10</span> XSLT (3.0): <code class="code">simple-macros.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/simple-macros.mod.xsl</code></p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Variable</th><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc:simple-macro-start-character</code></td><td><code class="code code-width-limited">xs:string</code></td><td><code class="code code-width-limited">'$'</code></td><td/></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#simple-macros.mod.xsl-xtlc_expand-simple-macros-3"><span class="link">xtlc:expand-simple-macros()</span></a></code></td><td>Expands simple macro's in a string with values. All macros to expand must start with $xtlc:simple-macro-start-character ($), for instance: $DATE.</td></tr><tr><td><code class="code code-width-limited"><a href="#simple-macros.mod.xsl-xtlc_expand-simple-macros-2"><span class="link">xtlc:expand-simple-macros()</span></a></code></td><td>Expands simple macro's in a string with values. See xtlc:expand-simple-macros#3</td></tr></tbody></table></div><div class="sect2" id="simple-macros.mod.xsl-xtlc_expand-simple-macros-3"><a name="simple-macros.mod.xsl-xtlc_expand-simple-macros-3"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.10.1</span> Function: <code class="code">xtlc:expand-simple-macros() as xs:string</code></h3><p class="para">Expands simple macro's in a string with values. All macros to expand must start with $xtlc:simple-macro-start-character ($), for instance: $DATE.</p><p class="para">The substitution values are in a map. The keys must be the macro strings. For instance: map{'DATE': '2023-04-04', 'TIME': '16:04:35'}</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The string to convert.</td></tr><tr><td><code class="code code-width-limited">macros-map</code></td><td><code class="code code-width-limited">map(xs:string, xs:string)</code></td><td>The map with the macro/substitution values.</td></tr><tr><td><code class="code code-width-limited">filename-safe</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td>Whether to make all substitutions "filename safe", replacing all invalid characters for a file/directory name with an underscore. Use this when replacing macros in file/directory name strings.</td></tr></tbody></table></div></div><div class="sect2" id="simple-macros.mod.xsl-xtlc_expand-simple-macros-2"><a name="simple-macros.mod.xsl-xtlc_expand-simple-macros-2"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.10.2</span> Function: <code class="code">xtlc:expand-simple-macros() as xs:string</code></h3><p class="para">Expands simple macro's in a string with values. See xtlc:expand-simple-macros#3</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">in</code></td><td><code class="code code-width-limited">xs:string</code></td><td>The string to convert.</td></tr><tr><td><code class="code code-width-limited">macros-map</code></td><td><code class="code code-width-limited">map(xs:string, xs:string)</code></td><td>The map with the macro/substitution values.</td></tr></tbody></table></div></div></div><div class="sect1" id="uuid.mod.xsl"><a name="uuid.mod.xsl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">2.11</span> XSLT (2.0): <code class="code">uuid.mod.xsl</code></h2><p class="para keep-with-next">File: <code class="code">xslmod/uuid.mod.xsl</code></p><p class="para">UUID related functions.</p><p class="para">Works only in Saxon PE or EE (not in the free HE), because we are calling an underlying Java function.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Prefix</th><th>Namespace URI</th></tr></thead><tbody><tr><td><code class="code code-width-limited">xtlc</code></td><td><code class="code">http://www.xtpxlib.nl/ns/common</code></td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#uuid.mod.xsl-xtlc_get-uuid-0"><span class="link">xtlc:get-uuid()</span></a></code></td><td>Returns a random unique UUID (by calling an underlying Java function)</td></tr><tr><td><code class="code code-width-limited"><a href="#uuid.mod.xsl-xtlc_is-real-uuid-1"><span class="link">xtlc:is-real-uuid()</span></a></code></td><td>Checks whether a string contains a "real" UUID (conforms to the UUID formatting rules).</td></tr></tbody></table></div><div class="sect2" id="uuid.mod.xsl-xtlc_get-uuid-0"><a name="uuid.mod.xsl-xtlc_get-uuid-0"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.11.1</span> Function: <code class="code">xtlc:get-uuid() as xs:string</code></h3><p class="para">Returns a random unique UUID (by calling an underlying Java function)</p></div><div class="sect2" id="uuid.mod.xsl-xtlc_is-real-uuid-1"><a name="uuid.mod.xsl-xtlc_is-real-uuid-1"><!----></a><h3 class="sect2" style="padding-top: 65px; margin-top: -65px;"><span class="sect2-number">2.11.2</span> Function: <code class="code">xtlc:is-real-uuid() as xs:boolean</code></h3><p class="para">Checks whether a string contains a "real" UUID (conforms to the UUID formatting rules).</p><p class="para">Example: <code class="code">5EAE5C68-7394-48d7-A50B-1669E8D3A6C9</code> (upper/lower-case both admitted)</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">id</code></td><td><code class="code code-width-limited">xs:string?</code></td><td>UUID to check.</td></tr></tbody></table></div></div></div></div><script src="resources/jquery-3.4.1.slim.min.js"><!--  --></script><script src="resources/popper.min.js"><!--  --></script><script src="resources/bootstrap.min.js"><!--  --></script></body>
</html>