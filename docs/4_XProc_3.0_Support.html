<?xml version="1.0" encoding="UTF-8"?>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container">
  
  
  
  
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="resources/bootstrap.min.css"/>
    <link rel="stylesheet" href="resources/xtpxlib-moduledoc.css"/>
    <link rel="shortcut icon" href="resources/favicon.ico"/>
    <title>4 XProc 3.0 Support</title>
  </head>
  <body style="padding-top: 65px;"><nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark"><a class="navbar-brand" href="index.html" title="home">xtpxlib-common</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"/></button><div id="navbarSupportedContent" class="collapse navbar-collapse"><ul class="navbar-nav mr-auto"><li class="nav-item dropdown"><a href="1_Description.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Description <span class="caret"/></a><div class="dropdown-menu"><a href="1_Description.html" class="dropdown-item">Description</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="1_Description.html#d9366e200">Contents</a><a class="dropdown-item" href="1_Description.html#parameters-explanation">Parameter handling in xtpxlib-common</a></div></li><li class="nav-item dropdown"><a href="2_XSLT_Modules.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XSLT Modules <span class="caret"/></a><div class="dropdown-menu"><a href="2_XSLT_Modules.html" class="dropdown-item">XSLT Modules</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="2_XSLT_Modules.html#compare.mod.xsl">XSLT (2.0): compare.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#date-time.mod.xsl">XSLT (2.0): date-time.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#format-output.mod.xsl">XSLT (2.0): format-output.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#general.mod.xsl">XSLT (2.0): general.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#href.mod.xsl">XSLT (2.0): href.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#macrodefs.mod.xsl">XSLT (3.0): macrodefs.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#message.mod.xsl">XSLT (2.0): message.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#mimetypes.mod.xsl">XSLT (2.0): mimetypes.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#parameters.mod.xsl">XSLT (3.0): parameters.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#simple-macros.mod.xsl">XSLT (3.0): simple-macros.mod.xsl</a><a class="dropdown-item" href="2_XSLT_Modules.html#uuid.mod.xsl">XSLT (2.0): uuid.mod.xsl</a></div></li><li class="nav-item dropdown"><a href="3_XProc_1.0_Libraries.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XProc 1.0 Libraries <span class="caret"/></a><div class="dropdown-menu"><a href="3_XProc_1.0_Libraries.html" class="dropdown-item">XProc 1.0 Libraries</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="3_XProc_1.0_Libraries.html#common.mod.xpl">XProc (1.0) library: common.mod.xpl</a></div></li><li class="nav-item dropdown"><a href="4_XProc_3.0_Support.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XProc 3.0 Support <span class="caret"/></a><div class="dropdown-menu"><a href="4_XProc_3.0_Support.html" class="dropdown-item">XProc 3.0 Support</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="4_XProc_3.0_Support.html#d9366e7386">oXygen XProc 3.0 support</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#copy-dir.xpl">XProc (3.0) pipeline: copy-dir.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#create-clear-directory.xpl">XProc (3.0) pipeline: create-clear-directory.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#expand-macro-definitions.xpl">XProc (3.0) pipeline: expand-macro-definitions.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#recursive-directory-list.xpl">XProc (3.0) pipeline: recursive-directory-list.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#subdir-list.xpl">XProc (3.0) pipeline: subdir-list.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#validate.xpl">XProc (3.0) pipeline: validate.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#write-log.xpl">XProc (3.0) pipeline: write-log.xpl</a><a class="dropdown-item" href="4_XProc_3.0_Support.html#zip-directory.xpl">XProc (3.0) pipeline: zip-directory.xpl</a></div></li><li class="nav-item dropdown"><a href="5_XSLT_Stylesheets.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XSLT Stylesheets <span class="caret"/></a><div class="dropdown-menu"><a href="5_XSLT_Stylesheets.html" class="dropdown-item">XSLT Stylesheets</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="5_XSLT_Stylesheets.html#expand-macro-definitions.xsl">XSLT (3.0): expand-macro-definitions.xsl</a><a class="dropdown-item" href="5_XSLT_Stylesheets.html#get-system-properties.xsl">XSLT (2.0): get-system-properties.xsl</a><a class="dropdown-item" href="5_XSLT_Stylesheets.html#xslmod2xqmod-stub.xsl">XSLT (2.0): xslmod2xqmod-stub.xsl</a></div></li><li class="nav-item dropdown"><a href="6_XML_Data_Files.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XML Data Files <span class="caret"/></a><div class="dropdown-menu"><a href="6_XML_Data_Files.html" class="dropdown-item">XML Data Files</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="6_XML_Data_Files.html#dummy.xml">XML document: dummy.xml</a><a class="dropdown-item" href="6_XML_Data_Files.html#fop-default-config.xml">XML document: fop-default-config.xml</a><a class="dropdown-item" href="6_XML_Data_Files.html#mimetypes-table.xml">XML document: mimetypes-table.xml</a></div></li><li class="nav-item dropdown"><a href="7_XML_Schemas.html" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">XML Schemas <span class="caret"/></a><div class="dropdown-menu"><a href="7_XML_Schemas.html" class="dropdown-item">XML Schemas</a><div class="dropdown-divider"><!----></div><a class="dropdown-item" href="7_XML_Schemas.html#message.xsd">XML Schema: message.xsd</a><a class="dropdown-item" href="7_XML_Schemas.html#mimetypes.xsd">XML Schema: mimetypes.xsd</a><a class="dropdown-item" href="7_XML_Schemas.html#parameters.xsd">XML Schema: parameters.xsd</a></div></li><li class="nav-item"><a class="nav-link" href="resources/xtpxlib-common-documentation.pdf" title="PDF version of this documentation site">PDF</a></li></ul></div></nav><div class="container"><a name="chapter-xproc-3-support"><!----></a><div class="page-header" style="padding-top: 65px; margin-top: -65px;"><h1 class="chapter"><span class="chapter-number">4 </span>XProc 3.0 Support</h1></div><div class="sect1" id="d9366e7386"><a name="d9366e7386"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.1</span> oXygen XProc 3.0 support</h2><p class="para">The component contains a framework for oXygen that enables it to validate XProc 3.0 documents. To use this:</p><ul class="itemizedlist"><li><p class="para">Add the framework to the oXygen configuration:</p><ul class="itemizedlist"><li><p class="para">Menu: Options / Preferences…</p></li><li><p class="para">Navigate to: Document Type Association / Locations</p></li><li><p class="para">Add the full path to <code class="code">xtpxlib-common/frameworks</code></p></li><li><p class="para">Navigate on up to: Document Type Association</p></li><li><p class="para">Check that the XProc 3.0 framework is enabled</p></li></ul></li><li><p class="para">Disable the use of the XProc 1.0 support in oXygen. To do this:</p><ul class="itemizedlist"><li><p class="para">Menu: Options / Preferences…</p></li><li><p class="para">Navigate to: File types</p></li><li><p class="para">Associate the file types that you use for XProc 3.0 (in my case <code class="code">.xpl</code> files) with the plain XML editor</p></li></ul></li></ul></div><div class="table"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Module/Pipeline</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited"><a href="#copy-dir.xpl"><span class="link">copy-dir.xpl</span></a></code></td><td>This step copies a directory and all its contents from one location to the other.</td></tr><tr><td><code class="code code-width-limited"><a href="#create-clear-directory.xpl"><span class="link">create-clear-directory.xpl</span></a></code></td><td>This step does two things:</td></tr><tr><td><code class="code code-width-limited"><a href="#expand-macro-definitions.xpl"><span class="link">expand-macro-definitions.xpl</span></a></code></td><td>This is an XProc driver for the <code class="code">xtlc:expand-macro-definitions</code> template in <code class="code">xslmod/macrodefs.mod.xsl</code>.</td></tr><tr><td><code class="code code-width-limited"><a href="#recursive-directory-list.xpl"><span class="link">recursive-directory-list.xpl</span></a></code></td><td>Extension of standard the <code class="code">p:directory</code> list step. Returns the contents of a directory, going into sub-directories recursively. Adds the possibility to "flatten" the list.</td></tr><tr><td><code class="code code-width-limited"><a href="#subdir-list.xpl"><span class="link">subdir-list.xpl</span></a></code></td><td>Returns an XML document with the sub-directories of a given directory.</td></tr><tr><td><code class="code code-width-limited"><a href="#validate.xpl"><span class="link">validate.xpl</span></a></code></td><td>This step performs validation using a W3C Schema and/or Schematron. It breaks the processing if something is wrong.</td></tr><tr><td><code class="code code-width-limited"><a href="#write-log.xpl"><span class="link">write-log.xpl</span></a></code></td><td>Writes an entry to a log file.</td></tr><tr><td><code class="code code-width-limited"><a href="#zip-directory.xpl"><span class="link">zip-directory.xpl</span></a></code></td><td>Zips a directory into a single zip file.</td></tr></tbody></table></div><div class="sect1" id="copy-dir.xpl"><a name="copy-dir.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.2</span> XProc (3.0) pipeline: <code class="code">copy-dir.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/copy-dir/copy-dir.xpl</code></p><p class="para">Type: <code class="code">xtlc:copy-dir</code></p><p class="para">This step copies a directory and all its contents from one location to the other.</p><ul class="itemizedlist"><li><p class="para">If $clear-target is true (default), before copying the target directory is cleared/emptied.</p></li><li><p class="para">If the source directory is empty, it simply creates an empty target directory.</p></li><li><p class="para">It can do include/exclude filtering, like <code class="code">p:directory-list</code></p></li></ul><p class="para">The step itself acts as an identity step.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">source</code></td><td>in</td><td>yes</td><td/></tr><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td/></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">clear-target</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether to clear the target before copying.</td></tr><tr><td><code class="code code-width-limited">depth</code></td><td><code class="code code-width-limited">xs:integer</code></td><td> </td><td><code class="code code-width-limited">-1</code></td><td>The sub-directory depth to go. When lt <code class="code">0</code>, all sub-directories are processed.</td></tr><tr><td><code class="code code-width-limited">exclude-filter</code></td><td><code class="code code-width-limited">xs:string*</code></td><td> </td><td><code class="code code-width-limited">'\.git/'</code></td><td>Regular expression(s) for files to be excluded from the copy. By default, git directories are excluded</td></tr><tr><td><code class="code code-width-limited">href-source</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The full path/URI of the source directory. If the directory does not exist, nothing will happen.</td></tr><tr><td><code class="code code-width-limited">href-target</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The full path/URI of the target directory. Any non-existing parent directories leading up to this directory will be automatically created.</td></tr><tr><td><code class="code code-width-limited">include-filter</code></td><td><code class="code code-width-limited">xs:string*</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Regular expression(s) files to be included in the copy.</td></tr></tbody></table></div></div><div class="sect1" id="create-clear-directory.xpl"><a name="create-clear-directory.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.3</span> XProc (3.0) pipeline: <code class="code">create-clear-directory.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/create-clear-directory/create-clear-directory.xpl</code></p><p class="para">Type: <code class="code">xtlc:create-clear-directory</code></p><p class="para">This step does two things:</p><ul class="itemizedlist"><li><p class="para">When <code class="code">$clear</code> is true, it removes an (optionally) existing directory</p></li><li><p class="para">Then it makes sure the directory always exists</p></li></ul><p class="para">It doesn't matter whether the directory exists beforehand.</p><p class="para">The step itself acts as an identity step.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">source</code></td><td>in</td><td>yes</td><td/></tr><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td/></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">clear</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether or not to empty an existing directory.</td></tr><tr><td><code class="code code-width-limited">href-dir</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The full path/URI of the directory to delete.</td></tr></tbody></table></div></div><div class="sect1" id="expand-macro-definitions.xpl"><a name="expand-macro-definitions.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.4</span> XProc (3.0) pipeline: <code class="code">expand-macro-definitions.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/expand-macro-definitions/expand-macro-definitions.xpl</code></p><p class="para">Type: <code class="code">xtlc:expand-macro-definitions</code></p><p class="para">This is an XProc driver for the <code class="code">xtlc:expand-macro-definitions</code> template in <code class="code">xslmod/macrodefs.mod.xsl</code>.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">source</code></td><td>in</td><td>yes</td><td>The document to expand the macro definition references in</td></tr><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td>The resulting document with the macro definitions expanded.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">add-macrodef-comments</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">false()</code></td><td>Whether to add a macro definition comment (summarizing all macro definitions) when a <code class="code">&lt;*:macrodefs&gt;</code> element is processed.</td></tr><tr><td><code class="code code-width-limited">expand-in-attributes</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether to expand the macro definitions in attributes.</td></tr><tr><td><code class="code code-width-limited">expand-in-text</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether to expand the macro definitions in text nodes.</td></tr><tr><td><code class="code code-width-limited">macrodefs</code></td><td><code class="code code-width-limited">map(xs:string, xs:string)*</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Any initial macro definitions.</td></tr><tr><td><code class="code code-width-limited">use-local-macrodefs</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Check for <code class="code">&lt;*:macrodefs&gt;</code> element as first child and process accordingly</td></tr><tr><td><code class="code code-width-limited">use-standard-macrodefs</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether to use the standard macro definitions.</td></tr></tbody></table></div></div><div class="sect1" id="recursive-directory-list.xpl"><a name="recursive-directory-list.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.5</span> XProc (3.0) pipeline: <code class="code">recursive-directory-list.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/recursive-directory-list/recursive-directory-list.xpl</code></p><p class="para">Type: <code class="code">xtlc:recursive-directory-list</code></p><p class="para">Extension of standard the <code class="code">p:directory</code> list step. Returns the contents of a directory, going into sub-directories recursively. Adds the possibility to "flatten" the list.</p><p class="para">This step will also <span class="emphasis italic">not</span> throw an error when the directory does not exist. Instead it will simply return an empty result (with an <code class="code">error="true</code> attribute).</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td>The resulting directory structure in XML format. See the standard <code class="code">p:directory-list</code> step for a more detailed description.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">add-decoded</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">false()</code></td><td>When <code class="code">true</code> and <code class="code">$flatten</code> is <code class="code">true</code>, attributes <code class="code">@href-rel-decoded</code> and <code class="code">@href-abs-decoded</code> are added in which any percent encoded characters are decoded.</td></tr><tr><td><code class="code code-width-limited">depth</code></td><td><code class="code code-width-limited">xs:integer</code></td><td> </td><td><code class="code code-width-limited">-1</code></td><td>The sub-directory depth to go. When lt <code class="code">0</code>, all sub-directories are processed.</td></tr><tr><td><code class="code code-width-limited">detailed</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">false()</code></td><td>Whether to add detailed information.</td></tr><tr><td><code class="code code-width-limited">exclude-filter</code></td><td><code class="code code-width-limited">xs:string*</code></td><td> </td><td><code class="code code-width-limited">'\.git/'</code></td><td>Optional regular expression exclude filters. By default, git directories are excluded.</td></tr><tr><td><code class="code code-width-limited">flatten</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">false()</code></td><td>When <code class="code">true</code>, the list will be "flattened": All <code class="code">c:file</code> children will be direct children of the root's <code class="code">c:directory</code> element. These <code class="code">c:file</code> elements get a <code class="code">@name</code>, <code class="code">@href-abs</code> (absolute filename) and <code class="code">@href-rel</code> (relative filename) attribute.</td></tr><tr><td><code class="code code-width-limited">include-filter</code></td><td><code class="code code-width-limited">xs:string*</code></td><td> </td><td><code class="code code-width-limited"/></td><td>Optional regular expression include filters.</td></tr><tr><td><code class="code code-width-limited">override-content-types</code></td><td><code class="code code-width-limited">array(array(xs:string))?</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Override content types specification (see description of <code class="code">p:directory-list</code>).</td></tr><tr><td><code class="code code-width-limited">path</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The path to get the directory listing from.</td></tr></tbody></table></div></div><div class="sect1" id="subdir-list.xpl"><a name="subdir-list.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.6</span> XProc (3.0) pipeline: <code class="code">subdir-list.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/subdir-list/subdir-list.xpl</code></p><p class="para">Type: <code class="code">xtlc:subdir-list</code></p><p class="para">Returns an XML document with the sub-directories of a given directory.</p><div class="programlisting"><pre class="programlisting">&lt;subdir-list href="..."&gt;
  &lt;subdir href="..." name="..."/&gt;
  ...
&lt;/subdir-list&gt;</pre></div><p class="para">If an error occurs, it will only return the root element with an additional error="true" attribute. Will not recurse!</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td>The sub-directory listing (as described above).</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">path</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The path to get the sub-directories from. Always use an absolute path!</td></tr></tbody></table></div></div><div class="sect1" id="validate.xpl"><a name="validate.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.7</span> XProc (3.0) pipeline: <code class="code">validate.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/validate/validate.xpl</code></p><p class="para">Type: <code class="code">xtlc:validate</code></p><p class="para">This step performs validation using a W3C Schema and/or Schematron. It breaks the processing if something is wrong.</p><p class="para">This might seem superfluous (there are already <code class="code">p:validate-with...</code> steps), but often these steps <span class="emphasis italic">change</span> the document. This step performs like a real identity step.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">source</code></td><td>in</td><td>yes</td><td>Document to validate.</td></tr><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td>The same as the input document.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">href-schema</code></td><td><code class="code code-width-limited">xs:string?</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Optional reference to an W3C Schema to validate the document with. If <code class="code">()</code>, no schema validation will be performed.</td></tr><tr><td><code class="code code-width-limited">href-schematron</code></td><td><code class="code code-width-limited">xs:string?</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Optional reference to a Schematron Schema to validate the document with. If <code class="code">()</code>, no Schematron validation will be performed.</td></tr><tr><td><code class="code code-width-limited">schema-version</code></td><td><code class="code code-width-limited">xs:string</code></td><td> </td><td><code class="code code-width-limited">'1.0'</code></td><td>The W3C Schema version to use.</td></tr></tbody></table></div></div><div class="sect1" id="write-log.xpl"><a name="write-log.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.8</span> XProc (3.0) pipeline: <code class="code">write-log.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/write-log/write-log.xpl</code></p><p class="para">Type: <code class="code">xtlc:write-log</code></p><p class="para">Writes an entry to a log file.</p><p class="para">With regards to documents flowing through, acts like a <code class="code">p:identity</code> step.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">source</code></td><td>in</td><td>yes</td><td>Documents will be passed unchanged to the <code class="code">result</code> port.</td></tr><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td>Documents coming from the <code class="code">source</code> port, unchanged.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">additional-attributes</code></td><td><code class="code code-width-limited">map(xs:QName, xs:string)?</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>A map with additional attributes to add to the log entry's <code class="code">entry</code> element.</td></tr><tr><td><code class="code code-width-limited">additional-elements</code></td><td><code class="code code-width-limited">element()*</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Elements with additional information to add to this log entry.</td></tr><tr><td><code class="code code-width-limited">enable</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether the logging will be done at all.</td></tr><tr><td><code class="code code-width-limited">enable-debug-messages</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>Whether messages with debug status will be written as well.</td></tr><tr><td><code class="code code-width-limited">href-log</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>URI of the file to write the log entries to.</td></tr><tr><td><code class="code code-width-limited">keep-entries</code></td><td><code class="code code-width-limited">xs:integer</code></td><td> </td><td><code class="code code-width-limited">0</code></td><td>The number of entries to keep in the logfile. If le <code class="code">0</code>, all messages are kept.</td></tr><tr><td><code class="code code-width-limited">log-comments</code></td><td><code class="code code-width-limited">xs:string*</code></td><td> </td><td><code class="code code-width-limited">()</code></td><td>Any comments to write as file header when creating a new log file. Ignored on an existing log file.</td></tr><tr><td><code class="code code-width-limited">messages</code></td><td><code class="code code-width-limited">xs:string+</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>The actual texts/lines of the log entry to write. All will become a separate <code class="code">message</code> element.</td></tr><tr><td><code class="code code-width-limited">status</code></td><td><code class="code code-width-limited">xs:string</code></td><td> </td><td><code class="code code-width-limited">'info'</code></td><td>Status of the entry. Must be <code class="code">info</code>, <code class="code">warning</code>, <code class="code">error</code> or <code class="code">debug</code>.</td></tr></tbody></table></div></div><div class="sect1" id="zip-directory.xpl"><a name="zip-directory.xpl"><!----></a><h2 class="sect1" style="padding-top: 65px; margin-top: -65px;"><span class="sect1-number">4.9</span> XProc (3.0) pipeline: <code class="code">zip-directory.xpl</code></h2><p class="para keep-with-next">File: <code class="code">xpl3mod/zip-directory/zip-directory.xpl</code></p><p class="para">Type: <code class="code">xtlc:zip-directory</code></p><p class="para">Zips a directory into a single zip file.</p><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Port</th><th>Type</th><th>Primary?</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">result</code></td><td>out</td><td>yes</td><td>The archive manifest of the created zip file.</td></tr></tbody></table></div><div class="table nonumber"><table class="table table-sm table-bordered"><thead class="thead-light"><tr><th>Option</th><th>Type</th><th>Rq?</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code class="code code-width-limited">base-path</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>URI of the directory which contents will be stored in the zip.</td></tr><tr><td><code class="code code-width-limited">depth</code></td><td><code class="code code-width-limited">xs:integer</code></td><td> </td><td><code class="code code-width-limited">-1</code></td><td>The sub-directory depth to go. When lt <code class="code">0</code>, all sub-directories are processed.</td></tr><tr><td><code class="code code-width-limited">exclude-filter</code></td><td><code class="code code-width-limited">xs:string*</code></td><td> </td><td><code class="code code-width-limited">'\.git/'</code></td><td>Optional regular expression exclude filters. By default, git directories are excluded.</td></tr><tr><td><code class="code code-width-limited">href-target-zip</code></td><td><code class="code code-width-limited">xs:string</code></td><td>yes</td><td><code class="code code-width-limited"/></td><td>URI for the zip file to produce.</td></tr><tr><td><code class="code code-width-limited">include-base</code></td><td><code class="code code-width-limited">xs:boolean</code></td><td> </td><td><code class="code code-width-limited">true()</code></td><td>When true, the last part of <code class="code">$base-path</code> (for instance <code class="code">a/b/c</code> ==&gt; <code class="code">c</code>) is used as root directory for entries in the zip file.</td></tr><tr><td><code class="code code-width-limited">include-filter</code></td><td><code class="code code-width-limited">xs:string*</code></td><td> </td><td><code class="code code-width-limited"/></td><td>Optional regular expression include filters.</td></tr></tbody></table></div></div></div><script src="resources/jquery-3.4.1.slim.min.js"><!--  --></script><script src="resources/popper.min.js"><!--  --></script><script src="resources/bootstrap.min.js"><!--  --></script></body>
</html>